# Journal - 2026-01-26 (Monday)

## Summary

Restored TP/SL orders after IBKR system update removed them. Changed trade time to 09:31 ET. New position opened: SPY 625P 2026-04-30 @ $6.08.

---

## Completed

### 1. Restored Missing Orders After IBKR Update

IBKR sent an email notifying that some orders were removed due to a system update.

**Before:** 0 orders in IBKR
**After:** 18 orders restored (9 TP + 9 SL)

Orders added using `clientId=0` for each position:

| Position | Strike | TP Order (BUY LMT) | SL Order (BUY STP) | OCA Group |
|----------|--------|--------------------|--------------------|-----------|
| 7 | 610P | 2.39 | 17.91 | pos_7_* |
| 6 | 615P | 2.62 | 19.65 | pos_6_* |
| 2 | 625P | 2.60 | 19.53 | pos_2_* |
| 8 | 625P | 2.28 | 17.07 | pos_8_* |
| 9 | 625P | 2.19 | 16.44 | pos_9_* |
| 1 | 630P | 2.24 | 16.77 | pos_1_* |
| 3 | 630P | 2.41 | 18.09 | pos_3_* |
| 4 | 630P | 2.36 | 17.67 | pos_4_* |
| 5 | 630P | 2.38 | 17.82 | pos_5_* |

### 2. Verified Dashboard Working

Position verification now works correctly on weekdays:

| Check | Status |
|-------|--------|
| Connection | Connected (LIVE U2619432) |
| Positions | 9 (all showing "Live") |
| Orders | 18 (9 TP + 9 SL) |
| Ready to Trade | Yes |

### 3. Changed Trade Time to 09:31 ET

Updated schedule from 09:35 to 09:31 ET:
```bash
# On EC2
sed -i 's/SCHEDULE_TRADE_TIME=09:35/SCHEDULE_TRADE_TIME=09:31/' /home/ec2-user/ibkr-spy-puts/.env
docker-compose up -d ibkr-bot  # Recreate to pick up new env
```

### 4. Trade Execution - New Position

**Execution at 09:31 ET:**

| Attempt | Time | Contract | Limit | Status |
|---------|------|----------|-------|--------|
| 1 | 09:31:22 | SPY 625P 2026-04-30 | $6.12 | Cancelled (10s timeout) |
| 2 | 09:31:57 | SPY 625P 2026-04-30 | $6.08 | **FILLED** at 09:32:00 |

**New Position Details:**
| Field | Value |
|-------|-------|
| Position ID | 10 |
| Contract | SPY 625P 2026-04-30 |
| Fill Price | $6.08 |
| Commission | $0.752 |
| Take Profit | $2.43 (BUY LMT) |
| Stop Loss | $18.24 (BUY STP) |
| OCA Group | OCA_1769437926 |

---

## IBKR Positions (Live)

| Strike | Expiry | Qty |
|--------|--------|-----|
| 610P | 2026-04-17 | -1 |
| 615P | 2026-04-17 | -1 |
| 625P | 2026-04-17 | -3 |
| 625P | 2026-04-30 | -1 |
| 630P | 2026-04-17 | -4 |

**Total: 10 contracts**

---

## Verification Status

| Check | Status |
|-------|--------|
| EC2 Connection | Connected to LIVE account U2619432 |
| Positions | 10 (all showing "Live") |
| Orders | 20 (10 TP + 10 SL) |
| Trade Time | 09:31 ET |
| Dashboard | Fully operational |

---

## Files Modified

None - operational tasks only. Config change on EC2 only.

---

## Investigation Notes

### Error 10091 - "SPY ARCA/TOP/ALL"

This warning is about **ARCA exchange enhanced data feeds** (TOP = Top of Book, ALL = All trades). It does NOT affect trading - we still get aggregated quotes through SMART routing. Confirmed market data type = 1 (Live).

### First Attempt Not Filled ($6.12)

Normal market movement, not a bug:
- Attempt 1: Market showed ~$6.10/$6.14 → mid $6.12
- Market dropped 4 cents over 30 seconds
- Attempt 2: Market showed $6.06/$6.10 → mid $6.08 → **FILLED**

Adaptive algo with **Normal priority** is correct for live trading (seeks price improvement).

---

## Pending

1. IBKR PGP key issue - waiting for them to re-import correct key
2. Store `conId` in database for weekend position verification
