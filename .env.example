# =============================================================================
# IBKR SPY Put Selling Bot - Environment Configuration
# =============================================================================
# Copy this file to .env:  cp .env.example .env
# Then edit .env with your values.
#
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# =============================================================================
# IBKR Credentials (Required for Docker deployment)
# =============================================================================
# Your Interactive Brokers username and password
# Not needed for local development if you run TWS manually

TWS_USERID=your_ibkr_username
TWS_PASSWORD=your_ibkr_password

# Trading mode: paper or live (Docker only - IB Gateway uses this)
TRADING_MODE=live

# =============================================================================
# TWS/IB Gateway Connection
# =============================================================================
# LOCAL DEVELOPMENT (running TWS on your machine):
#   TWS_HOST=127.0.0.1
#   TWS_PORT=7497  (paper) or 7496 (live)
#
# DOCKER (containers talk to each other):
#   TWS_HOST=ib-gateway
#   TWS_PORT=4002  (paper) or 4001 (live)

TWS_HOST=127.0.0.1
TWS_PORT=7497
# ClientId 0 is recommended - it's the "master" clientId that can see and
# cancel ALL orders from ANY clientId. This prevents issues where scripts
# or the scheduler can't manage orders placed by different clientIds.
# Only use non-zero clientId if you need multiple separate trading systems.
TWS_CLIENT_ID=0

# =============================================================================
# Database
# =============================================================================
# LOCAL: use localhost
# DOCKER: use "postgres" (container name)

DB_HOST=localhost
DB_PORT=5432
DB_NAME=ibkr_puts
DB_USER=ibkr
DB_PASSWORD=ibkr_dev_password

# =============================================================================
# Strategy Parameters (prefix: STRATEGY_)
# =============================================================================
STRATEGY_SYMBOL=SPY
STRATEGY_TARGET_DTE=90
STRATEGY_TARGET_DELTA=-0.15
STRATEGY_QUANTITY=1
STRATEGY_ORDER_TYPE=LMT

# Bracket orders (prefix: BRACKET_)
BRACKET_ENABLED=true
BRACKET_TAKE_PROFIT_PCT=60
BRACKET_STOP_LOSS_PCT=200

# =============================================================================
# Scheduler
# =============================================================================
SCHEDULE_TRADE_TIME=09:35
SCHEDULE_TIMEZONE=America/New_York

# =============================================================================
# Docker-specific Settings
# =============================================================================
# Run mode: scheduler, api, or all
RUN_MODE=all

# Dry run - test without placing real orders
DRY_RUN=true

# Dashboard port
DASHBOARD_PORT=8000

# Timezone
TZ=America/New_York

# VNC for debugging IB Gateway (optional)
VNC_PORT=5900
VNC_PASSWORD=
